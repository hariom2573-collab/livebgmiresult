<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BGMI Admin Panel ‚Äì Live Slots</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  padding:10px;
  background:#0a0a12;
  color:#fff;
  font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}
h2{color:#00f5ff;margin:4px 0 6px}
small{opacity:.75;display:block;margin-bottom:6px}

#loginBox, #adminPanel{
  max-width:720px;
  margin:0 auto;
}

.card{
  background:#121226;
  border-radius:14px;
  padding:10px;
  margin-bottom:10px;
  box-shadow:0 0 10px rgba(0,245,255,.12)
}

.row{
  display:flex;
  gap:8px;
  margin-top:6px;
  flex-wrap:wrap;
}

input, select, button{
  width:100%;
  padding:12px 10px;
  border-radius:10px;
  border:none;
  outline:none;
  font-size:15px;
}

select{appearance:none}

button{
  background:linear-gradient(135deg,#7b3fe4,#00f5ff,#ffd86b);
  font-weight:900;
  color:#000;
  cursor:pointer;
}

#pushBtn{
  position:sticky;
  bottom:10px;
  margin-top:12px;
  width:100%;
  padding:14px;
  border-radius:14px;
  z-index:9;
}

#loginBox{
  margin-top:20vh;
  padding:16px;
  border-radius:14px;
  background:#121226;
  box-shadow:0 0 16px rgba(0,245,255,.2)
}

.hidden{display:none}

@media (min-width: 640px){
  .row{flex-wrap:nowrap}
  input, select{width:50%}
}
</style>
</head>
<body>

<!-- üîê LOGIN -->
<div id="loginBox">
  <h2>üîê Admin Login</h2>
  <input id="passInput" type="password" placeholder="Enter Admin Password">
  <button id="loginBtn">Login</button>
  <small id="err" style="color:#ff5a5a;display:none">‚ùå Wrong password</small>
</div>

<!-- üõ† ADMIN PANEL -->
<div id="adminPanel" class="hidden">
  <h2>üéÆ BGMI Live Slot Admin</h2>
  <small>Yahan se slots update karo ‚Äî sab logon ke overlay pe live reflect hoga.</small>

  <div id="adminWrap"></div>
  <button id="pushBtn">üöÄ Push Live</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

// üî• TERA FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyDsJUtZdIXcsB0w_2MQhMBXxIgbI3ijOvg",
  authDomain: "incoinpaysliveearning.firebaseapp.com",
  databaseURL: "https://incoinpaysliveearning-default-rtdb.firebaseio.com",
  projectId: "incoinpaysliveearning",
  storageBucket: "incoinpaysliveearning.appspot.com",
  messagingSenderId: "971873814750",
  appId: "1:971873814750:web:7418c7da119e4725ed9a4f",
  measurementId: "G-5QXM87ZRH2"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// üîê Password
const ADMIN_PASS = "Rajnish@1234";

const loginBox = document.getElementById("loginBox");
const adminPanel = document.getElementById("adminPanel");
const err = document.getElementById("err");

document.getElementById("loginBtn").onclick = ()=>{
  if(document.getElementById("passInput").value === ADMIN_PASS){
    loginBox.classList.add("hidden");
    adminPanel.classList.remove("hidden");
  } else {
    err.style.display = "block";
  }
};

// üß© Slots Data
const defaultSlots=[
  {slot:"Slot 1", name:"Big Bull", status:"R"},
  {slot:"Slot 2", name:"ZIA ESPORTS", status:""},
  {slot:"Slot 3", name:"PHRM", status:""},
  {slot:"Slot 4", name:"Angry.eSports", status:""},
  {slot:"Slot 5", name:"deltin Esports", status:""},
  {slot:"Slot 6", name:"AVAILABLE", status:""},
  {slot:"Slot 7", name:"AVAILABLE", status:""},
  {slot:"Slot 8", name:"AVAILABLE", status:""},
  {slot:"Slot 9", name:"AVAILABLE", status:"‚úÖ"},
  {slot:"Slot 10", name:"AVAILABLE", status:"‚úÖ"},
  {slot:"Slot 11", name:"AVAILABLE", status:"‚úÖ"},
  {slot:"Slot 12", name:"AVAILABLE", status:"‚úÖ"},
  {slot:"Slot 13", name:"AVAILABLE", status:"‚úÖ"},
  {slot:"Slot 14", name:"Reserved", status:"Reserved"},
  {slot:"Slot 15", name:"AVAILABLE", status:"‚úÖ"},
  {slot:"Slot 16", name:"AVAILABLE", status:"‚úÖ"},
  {slot:"Slot 17", name:"AVAILABLE", status:"‚úÖ"},
  {slot:"Slot 18", name:"AVAILABLE", status:"‚úÖ"},
  {slot:"Slot 19", name:"AVAILABLE", status:"‚úÖ"}
];

let slots = defaultSlots;
const wrap = document.getElementById("adminWrap");

function renderAdmin(){
  wrap.innerHTML="";
  slots.forEach((s,i)=>{
    const d=document.createElement("div");
    d.className="card";
    d.innerHTML=`
      <b>${s.slot}</b>
      <div class="row">
        <input value="${s.name}" placeholder="Team name" data-i="${i}" class="nameInput">
        <select data-i="${i}" class="statusSel">
          <option value="">Empty</option>
          <option value="R" ${s.status==="R"?"selected":""}>R</option>
          <option value="‚úÖ" ${s.status==="‚úÖ"?"selected":""}>Available</option>
          <option value="Reserved" ${s.status==="Reserved"?"selected":""}>Reserved</option>
        </select>
      </div>
    `;
    wrap.appendChild(d);
  });

  document.querySelectorAll(".nameInput").forEach(inp=>{
    inp.oninput = e => {
      slots[e.target.dataset.i].name = e.target.value.toUpperCase();
      e.target.value = e.target.value.toUpperCase();
    };
  });
  document.querySelectorAll(".statusSel").forEach(sel=>{
    sel.onchange = e => slots[e.target.dataset.i].status = e.target.value;
  });
}

document.getElementById("pushBtn").onclick = ()=>{
  set(ref(db, "slots"), slots);
  alert("‚úÖ Live push ho gaya! Sab logon ke overlay pe update aa gaya.");
};

onValue(ref(db,"slots"), (snap)=>{
  if(snap.exists()){
    slots = snap.val();
  }
  renderAdmin();
});
</script>

</body>
</html>
