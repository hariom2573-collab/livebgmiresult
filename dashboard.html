<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>BGMI Tournament â€¢ Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
<style>
:root{
  --gold:#FFD700;
  --gold2:#ff9f00;
  --muted:#9aa0b4;
  --stroke:rgba(255,215,0,.35);
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,system-ui;}
html,body{width:100%;height:100%;background:#05060b;color:#fff;overflow:hidden;}
.app{max-width:430px;margin:0 auto;height:100dvh;display:flex;flex-direction:column;gap:12px;padding:14px}

/* Header */
.header{display:flex;align-items:center;justify-content:space-between}
.menu-btn,.bell{
  width:40px;height:40px;border-radius:12px;
  border:1px solid var(--stroke);
  background:#0b0f1a; display:grid;place-items:center; font-size:18px;
}
.brand{font-weight:900;background:linear-gradient(90deg,#8a6b00,#FFD700,#fff1a8,#FFD700,#8a6b00);-webkit-background-clip:text;background-clip:text;color:transparent; font-size:16px}

/* Cards */
.card{background:#0b0f1a; border:1px solid var(--stroke); border-radius:18px; padding:14px;}
.card h2{font-size:13px;color:#ffeaa7;margin-bottom:8px}

/* Profile */
.profile{display:flex;gap:12px;align-items:center}
.avatar{width:56px;height:56px;border-radius:14px;background:#0f1220;border:1px solid var(--stroke);display:grid;place-items:center;font-weight:900;color:var(--gold);}
.meta{font-size:12px;color:var(--muted)}

/* Wallet */
.wallet{display:flex;align-items:center;justify-content:space-between}
.balance{font-size:26px;font-weight:900;color:var(--gold)}
.btn{border:none;border-radius:12px;padding:10px 14px;font-weight:800;background:linear-gradient(90deg,var(--gold2),var(--gold));color:#000}
.btn.ghost{background:transparent;color:var(--gold);border:1px dashed rgba(255,215,0,.5);box-shadow:none;}

/* Upcoming */
.upcoming{display:flex;gap:10px;overflow-x:auto}
.match{min-width:170px;background:#0f1220;border:1px solid var(--stroke);border-radius:14px;padding:10px}
.match .title{font-weight:800;font-size:13px}
.match .time,.match .fee{font-size:12px;color:var(--muted)}
.match .reg{margin-top:8px;width:100%;padding:8px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--gold2),var(--gold));font-weight:800;cursor:pointer}

/* Announcement */
.notice{font-size:12px;color:#c7d2fe;background:#0f1220;border:1px solid rgba(73,198,255,.35);border-radius:12px;padding:10px}

/* Firebase Loader */
.loading{font-size:12px;color:var(--gold);text-align:center;margin-top:6px;}
</style>
</head>
<body>

<div class="app">
  <div class="header">
    <div class="menu-btn">â˜°</div>
    <div class="brand">BGMI DASHBOARD</div>
    <div class="bell">ðŸ””</div>
  </div>

  <!-- Player Card -->
  <div class="card" id="playerCard">
    <h2>PLAYER</h2>
    <div class="profile">
      <div class="avatar" id="playerAvatar">A</div>
      <div>
        <div style="font-weight:800" id="playerName">Aman Gamer</div>
        <div class="meta" id="playerBGMI">BGMI ID: 785412369</div>
        <div class="meta" id="playerMobile">Mobile: 9876XXXX12</div>
      </div>
    </div>
  </div>

  <!-- Wallet Card -->
  <div class="card">
    <h2>WALLET</h2>
    <div class="wallet">
      <div>
        <div class="balance" id="walletBalance">â‚¹50</div>
        <div class="meta">Available Balance</div>
      </div>
      <button class="btn" onclick="addMoney()">Add Money</button>
    </div>
  </div>

  <!-- Announcement -->
  <div class="notice" id="announcement">ðŸ“¢ Room ID & Password will be shared 10 minutes before match start.</div>

  <!-- Upcoming Matches -->
  <div class="card">
    <h2>UPCOMING MATCHES</h2>
    <div class="upcoming">
      <div class="match" data-match="Solo Group A">
        <div class="title">Solo â€¢ Group A</div>
        <div class="time">Today â€¢ 2:00 PM</div>
        <div class="fee">Entry â‚¹20</div>
        <button class="reg" onclick="registerMatch(this,20,'Solo Group A')">Register</button>
      </div>
      <div class="match" data-match="Solo Group B">
        <div class="title">Solo â€¢ Group B</div>
        <div class="time">Today â€¢ 8:40 PM</div>
        <div class="fee">Entry â‚¹20</div>
        <button class="reg" onclick="registerMatch(this,20,'Solo Group B')">Register</button>
      </div>
    </div>
  </div>
  <div class="loading" id="loading">Loading player data...</div>
</div>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-app.js";
import { getDatabase, ref, push, set, get, child, update } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-database.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyDsJUtZdIXcsB0w_2MQhMBXxIgbI3ijOvg",
  authDomain: "incoinpaysliveearning.firebaseapp.com",
  databaseURL: "https://incoinpaysliveearning-default-rtdb.firebaseio.com",
  projectId: "incoinpaysliveearning",
  storageBucket: "incoinpaysliveearning.firebasestorage.app",
  messagingSenderId: "971873814750",
  appId: "1:971873814750:web:7418c7da119e4725ed9a4f",
  measurementId: "G-5QXM87ZRH2"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// Mock logged in player info (replace with actual login)
const currentPlayer = {
  name: "Aman Gamer",
  bgmi: "785412369",
  mobile: "9876543210",
  wallet: 50
};

// Load player info
function loadPlayerData(){
  document.getElementById("playerName").textContent = currentPlayer.name;
  document.getElementById("playerBGMI").textContent = "BGMI ID: " + currentPlayer.bgmi;
  document.getElementById("playerMobile").textContent = "Mobile: " + currentPlayer.mobile;
  document.getElementById("walletBalance").textContent = "â‚¹" + currentPlayer.wallet;
  document.getElementById("playerAvatar").textContent = currentPlayer.name[0].toUpperCase();
  document.getElementById("loading").style.display="none";
}
loadPlayerData();

// Add money to wallet
function addMoney(){
  let amt = prompt("Enter amount to add:", "20");
  amt = parseInt(amt);
  if(!isNaN(amt) && amt>0){
    currentPlayer.wallet += amt;
    document.getElementById("walletBalance").textContent = "â‚¹" + currentPlayer.wallet;

    // Save to Firebase
    const playerRef = ref(db, 'players/' + currentPlayer.mobile);
    update(playerRef, {wallet: currentPlayer.wallet}).then(()=>{
      alert(`â‚¹${amt} added to wallet`);
    }).catch(err=>alert("Firebase error: "+err));
  }else{
    alert("Invalid amount");
  }
}

// Register match
function registerMatch(btn, fee, matchName){
  if(currentPlayer.wallet < fee){
    alert("âŒ Insufficient balance!");
    return;
  }
  currentPlayer.wallet -= fee;
  document.getElementById("walletBalance").textContent = "â‚¹" + currentPlayer.wallet;

  btn.textContent = "Registered âœ…";
  btn.disabled = true;

  // Save registration in Firebase
  const matchRef = ref(db, 'registrations/' + matchName.replace(/\s/g,'_') + '/' + currentPlayer.mobile);
  set(matchRef, {
    name: currentPlayer.name,
    bgmi: currentPlayer.bgmi,
    mobile: currentPlayer.mobile,
    fee: fee,
    timestamp: Date.now()
  }).then(()=>console.log("Registered in Firebase"))
  .catch(err=>alert("Firebase error: "+err));
  alert(`ðŸŽ‰ Registration successful for ${matchName}! â‚¹${fee} deducted`);
}
</script>

</body>
</html>
